interface BasicAddress {
  firstName?: string;
  lastName?: string;
  email?: string;
  address1?: string;
  address2?: string;
  city?: string;
  country?: string;
  phone?: string;
  postcode?: string;
}


clean out the auth context of everything except for id's, name and email and combine into one query

create a customer context?

const WooCommerceRestApi = require('@woocommerce/woocommerce-rest-api').default;

export default async function handler(req, res) {
  const WooCommerce = new WooCommerceRestApi({
    url: 'https://emburymediawpdev.com',
    consumerKey: process.env.WOOCOMMERCE_CK,
    consumerSecret: process.env.WOOCOMMERCE_CS,
    version: 'wc/v3',
  });

  const data = {
    email: 'john.doe@example1.com',
    first_name: 'John',
    last_name: 'Doe',
    username: 'john.doe',
    billing: {
      first_name: 'John',
      last_name: 'Doe',
      company: '',
      address_1: '969 Market',
      address_2: '',
      city: 'San Francisco',
      state: 'CA',
      postcode: '94103',
      country: 'US',
      email: 'john.doe@example1.com',
      phone: '(555) 555-5555',
    },
    shipping: {
      first_name: 'John',
      last_name: 'Doe',
      company: '',
      address_1: '969 Market',
      address_2: '',
      city: 'San Francisco',
      state: 'CA',
      postcode: '94103',
      country: 'US',
    },
  };

  try {
    const customer = await WooCommerce.post('customers', data);
    const customerData = await customer.data;
    res.status(200).json({ customerData });
  } catch (error) {
    console.error(error);
    res.status(error.status || 500).end(error.message);
  }
}
